<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>文件上传</title>
    <link href="demo.css" rel="stylesheet" type="text/css" />
    <link href="../css/uploader.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="header" class="header">多个上传按钮</div>
    <div class="main">
        <div class="content">
            <div class="contentin">
                <div>
                    <a class="x-button upload-target">上传按钮1</a>
                    <a class="x-button upload-target">上传按钮2</a>
                    <a class="x-button upload-target">上传按钮3</a>
                </div>
                <div class="upload-view"></div>
                <div id="upload-log"></div>
            </div>
        </div>
        <div id="sidebar" class="sidebar"></div>
    </div>

    <script type="text/javascript" src="../js/Q.js"></script>
    <script type="text/javascript" src="../js/Q.Uploader.js"></script>
    <script type="text/javascript" src="../js/Q.Uploader.UI.js"></script>

    <script type="text/javascript" src="jquery-1.11.1.js"></script>
    <script type="text/javascript" src="demo.js"></script>

    <script type="text/javascript">
        //创建上传管理器
        function create_uploader(target) {
            var uploader = new Q.Uploader({
                url: UPLOAD_URL + "?type=file",
                target: target,
                view: $(".upload-view")[0],

                //为便于调试，此处关闭点击触发文件选择框功能，以模拟低版本IE触发方式
                clickTrigger: false,

                on: {
                    add: function (task) {
                        document.getElementById("upload-log").innerHTML += target.innerHTML + " 添加文件 : " + task.name + "<br>";
                    }
                }
            });

            return uploader;
        }

        $(".upload-target").each(function (i, el) {
            create_uploader(el);
        });

    </script>
</body>
</html>